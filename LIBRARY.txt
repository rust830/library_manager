CREATE DATABASE  IF NOT EXISTS LIBRARY CHARACTER SET utf8mb4;
CREATE TABLE CATEGORYS(
CATEGORY_ID INT PRIMARY KEY,
CATEGORY_NAME VARCHAR(50),
PARENT_CATEGORY_ID INT ,
FOREIGN KEY PARENT_CATEGORY_ID REFERNCE CATEGORY(CATEGORY_ID)
);
CREATE TABLE BOOK_INFORMATION(
BOOKID INT PRIMARY KEY AUTO_INCREMENT,
ISBN VARCHAR(20) NOT NULL,
BOOKNAME VARCHAR(50) NOT NULL,
CATEGORY_ID INT,
AUTHORNAME VARCHAR(50) NOT NULL,
PUBLISHER VARCHAR(50) NOT ,
PUBLISH_DATE DATE ,
LANGUAGEA VARCHAR(20) DEFAULT'中文' NOT NULL,
BRIEF_INTRODUCTION TEXT,
FOREIGN KEY CATEGORY_ID REFERENCE CATEGORYS(CATEGORY_ID)
);
CREATE TABLE COPY(
COPY_ID INT PRIMARY KEY AUTO_INCREMENT,
BOOKID INT,
FLOOR INT,
STACK INT,
LAYER INT,
STATU ENUM('AVAILABLE','CHECK_OUT','RESERVERD','LOST','DAMAGED'),
FOREIGN KEY(BOOKID) REFERENCES BOOK_INFORMATION(BOOKID)
);
CREATE TABLE users(
USER_ID INT PRIMARY KEY,
USER_NAME VARCHAR(50),
FINE DECIMAL(10,2),
USER_TYPE ENUM('STUDENT', 'TEACHER', 'STAFF') DEFAULT 'STUDENT',
PERMISSION BOOLEAN,
CURRENT_BORROWED INT DEFAULT 0
);
CREATE TABLE MUTIFUNCTIONALLOGS(
USER_NAME VARCHAR(50),
BOOK_NAME(),
COPY_ID;
BORROW_DATE DATE,
RETURN_DATE DATE
);//日志主要是记录用户什么时间借走了什么藏本，什么时候还书
CREATE TABLE BORROW_RULES(
USER_TYPE VARCHAR(20),
MAX_BORROW_DAYS INT NOT NULL,
FINE_PER_DAY DECIMAL(5,2),
ADDITION TEXT,
MAX_INT INT
);
INSERT INTO borrow_rules(USER_TYPE,MAX_BORROW_DAYS,FINE_PER_DAY,ADDITION,MAX_INT)
VALUES('STUDENT',365,1.00,'逾期一年将影响毕业',10),
('TEACHER',1000,0.50,'逾期一年影响绩效',20),
('STUFF',500,0.75,'null',15);
//初始的借阅规则

